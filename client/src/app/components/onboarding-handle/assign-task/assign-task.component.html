<h2>Assign employees to tasks</h2>
<form [formGroup]="assignForm"  (ngSubmit)="assignEmployees($event)">
    <div class="row">
        <div class="col-12 col-md-6">
            <mat-form-field class="w-100" appearance="outline">
                <mat-label>PLAN</mat-label>
                <mat-select formControlName="plan" [(value)]="selectedPlan">
                    <mat-option *ngFor="let p of filterPlans()" [value]="p.id">{{p.title}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6">
            <mat-form-field class="w-100" appearance="outline">
                <mat-label>TASK</mat-label>
                <mat-select formControlName="task" [(value)]="selectedTask">
                    <mat-option *ngFor="let t of filterTasks()" [value]="t.id">{{t.description}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-12">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let e of filterEmployees(); let i = index">
                    <td>
                        <mat-checkbox [checked]="isChecked[i]" (change)="toggleSelection($event.checked, e.id)"></mat-checkbox>
                    </td>
                    <td>{{e.name}}</td>
                    <td>{{e.jobData.department}}</td>
                    <td>{{e.status}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <button type="submit">submit</button>
</form>